<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />



<title>Advanced topics</title>

<script src="libs/jquery/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap/css/cosmo.min.css" rel="stylesheet" />
<script src="libs/bootstrap/js/bootstrap.min.js"></script>
<script src="libs/bootstrap/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap/shim/respond.min.js"></script>

<!-- Styles for this site -->
<link href="css/styles.css" rel="stylesheet">

<!-- Polyfill JS -->
<script src="js/polyfill.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; background-color: #dddddd; }
td.sourceCode { padding-left: 5px; }
code > span.kw { font-weight: bold; } /* Keyword */
code > span.dt { color: #800000; } /* DataType */
code > span.dv { color: #0000ff; } /* DecVal */
code > span.bn { color: #0000ff; } /* BaseN */
code > span.fl { color: #800080; } /* Float */
code > span.ch { color: #ff00ff; } /* Char */
code > span.st { color: #dd0000; } /* String */
code > span.co { color: #808080; font-style: italic; } /* Comment */
code > span.al { color: #00ff00; font-weight: bold; } /* Alert */
code > span.fu { color: #000080; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #ff0000; font-weight: bold; } /* Warning */
code > span.cn { color: #000000; } /* Constant */
code > span.sc { color: #ff00ff; } /* SpecialChar */
code > span.vs { color: #dd0000; } /* VerbatimString */
code > span.ss { color: #dd0000; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { } /* Variable */
code > span.cf { } /* ControlFlow */
code > span.op { } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { font-weight: bold; } /* Preprocessor */
code > span.at { } /* Attribute */
code > span.do { color: #808080; font-style: italic; } /* Documentation */
code > span.an { color: #808080; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #808080; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #808080; font-weight: bold; font-style: italic; } /* Information */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>



</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img { 
  max-width:100%; 
  height: auto; 
}
</style>
<div class="container-fluid main-container">

<!--html_preserve-->

<div class="header">
  <nav class="navbar">
      <h3 class="navbar-left"><strong>htmlwidgets</strong> for R</h3>
      <ul class="nav nav-pills navbar-right">
        <li role="presentation" id="nav-home"><a href="index.html">Home</a></li>
        <li role="presentation" id="nav-showcase"><a href="showcase_leaflet.html">Showcase</a></li>
        <li role="presentation" id="nav-develop" class="dropdown">
          <a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-expanded="false">
            Develop <span class="caret"></span>
          </a>
          <ul class="dropdown-menu" role="menu">
            <li role="presentation"><a href="develop_intro.html">Creating a widget</a></li>
            <li role="presentation"><a href="develop_sizing.html">Widget sizing</a></li>
            <li role="presentation"><a href="develop_advanced.html">Advanced topics</a></li>
          </ul>
        </li>
        <li role="presentation" id="nav-github"><a href="https://github.com/ramnathv/htmlwidgets">GitHub</a></li>
      </ul>
  </nav>
</div>

<div class="showcase-header hidden">

  <div id = "showcase-intro">
    HTML widgets work just like R plots except they produce interactive web visualizations. A line or two of R code is all it takes to produce a D3 graphic or Leaflet map. HTML widgets can be used at the R console as well as embedded in R Markdown reports and Shiny web applications.
  </div>

  <div class="row">

    <div class="col-sm-4">
      <div class="list-group">
        <a href="showcase_leaflet.html" class="list-group-item">
          <h5 class="list-group-item-heading">Leaflet</h5>
          <p class="list-group-item-text">Geo-spatial mapping</p>
        </a>
        <a href="showcase_dygraphs.html" class="list-group-item">
          <h5 class="list-group-item-heading">dygraphs</h5>
          <p class="list-group-item-text">Time series charting</p>
        </a>
        <a href="showcase_metricsgraphics.html" class="list-group-item">
          <h5 class="list-group-item-heading">MetricsGraphics</h5>
          <p class="list-group-item-text">Scatterplots and line charts with D3</p>
        </a>
        <a href="showcase_networkD3.html" class="list-group-item">
          <h5 class="list-group-item-heading">networkD3</h5>
          <p class="list-group-item-text">Graph data visualization with D3</p>
        </a>
        <a href="showcase_d3heatmap.html" class="list-group-item">
          <h5 class="list-group-item-heading">d3heatmap</h5>
          <p class="list-group-item-text">Interactive heatmaps with D3</p>
        </a>
        <a href="showcase_datatables.html" class="list-group-item">
          <h5 class="list-group-item-heading">DataTables</h5>
          <p class="list-group-item-text">Tabular data display</p>
        </a>
        <a href="showcase_threejs.html" class="list-group-item">
          <h5 class="list-group-item-heading">threejs</h5>
          <p class="list-group-item-text">3D scatterplots and globes</p>
        </a>
        <a href="showcase_diagrammer.html" class="list-group-item">
          <h5 class="list-group-item-heading">DiagrammeR</h5>
          <p class="list-group-item-text">Diagrams and flowcharts</p>
        </a>

      </div> <!-- list-group -->

    </div> <!-- col-sm-4 -->

    <div class="col-sm-8" id="showcase-body">

    </div> <!-- col-sm-8 -->

  </div> <!-- row -->

</div> <!-- showcase-header -->

<div id="page-body">

<!--/html_preserve-->

<div id="header">
<h1 class="title">Advanced topics</h1>
</div>

<div id="TOC">
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#data-transformation">Data transformation</a><ul>
<li><a href="#htmlwidgets.dataframetod3">HTMLWidgets.dataframeToD3()</a></li>
<li><a href="#htmlwidgets.transposearray2d">HTMLWidgets.transposeArray2D()</a></li>
<li><a href="#custom-json-serializer">Custom JSON serializer</a></li>
</ul></li>
<li><a href="#widget-instance-data">Widget instance data</a></li>
<li><a href="#passing-javascript-functions">Passing JavaScript functions</a></li>
<li><a href="#custom-widget-html">Custom widget HTML</a></li>
</ul>
</div>

<div id="overview" class="section level2">
<h2>Overview</h2>
<p>This article covers several aspects of creating widgets that are not required by all widgets, but are an essential part of getting bindings to certain types of JavaScript libraries to work properly. Topics covered include:</p>
<ul>
<li><p>Transforming JSON representations of R objects into representations required by JavaScript libraries (e.g. an R data frame to a d3 dataset).</p></li>
<li><p>Tracking instance-specific widget data within JavaScript bindings.</p></li>
<li><p>Passing JavaScript functions from R to JavaScript (e.g. a user provided formatting or drawing function)</p></li>
<li><p>Generating custom HTML to enclose a widget (the default is a <code>&lt;div&gt;</code> but some libraries require a different element e.g. a <code>&lt;span&gt;</code>).</p></li>
</ul>
</div>
<div id="data-transformation" class="section level2">
<h2>Data transformation</h2>
<p>R objects passed as part of the <code>x</code> parameter to the <code>createWidget()</code> function are transformed to JSON using the internal function <code>htmlwidgets:::toJSON()</code><a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a>, which is basically a wrapper function of <code>jsonlite::toJSON()</code> by default. However, sometimes this representation is not what is required by the JavaScript library you are interfacing with. There are two JavaScript functions that you can use to transform the JSON data.</p>
<div id="htmlwidgets.dataframetod3" class="section level3">
<h3>HTMLWidgets.dataframeToD3()</h3>
<p>R data frames are represented in “long” form (an array of named vectors) whereas d3 typically requires “wide” form (an array of objects each of which includes all names and values). Since the R representation is smaller in size and much faster to transmit over the network, we create the long-form representation of R data, and then transform the data in JavaScript using the <code>dataframeToD3()</code> helper function.</p>
<p>Here is an example of the long-form representation of an R data frame:</p>
<pre><code>{
  &quot;Sepal.Length&quot;: [5.1, 4.9, 4.7],
  &quot;Sepal.Width&quot;: [3.5, 3, 3.2],
  &quot;Petal.Length&quot;: [1.4, 1.4, 1.3],
  &quot;Petal.Width&quot;: [0.2, 0.2, 0.2],
  &quot;Species&quot;: [&quot;setosa&quot;, &quot;setosa&quot;, &quot;setosa&quot;]
} </code></pre>
<p>After we apply <code>HTMLWidgets.dataframeToD3()</code>, it will become:</p>
<pre><code>[
  {
    &quot;Sepal.Length&quot;: 5.1,
    &quot;Sepal.Width&quot;: 3.5,
    &quot;Petal.Length&quot;: 1.4,
    &quot;Petal.Width&quot;: 0.2,
    &quot;Species&quot;: &quot;setosa&quot;
  },
  {
    &quot;Sepal.Length&quot;: 4.9,
    &quot;Sepal.Width&quot;: 3,
    &quot;Petal.Length&quot;: 1.4,
    &quot;Petal.Width&quot;: 0.2,
    &quot;Species&quot;: &quot;setosa&quot;
  },
  {
    &quot;Sepal.Length&quot;: 4.7,
    &quot;Sepal.Width&quot;: 3.2,
    &quot;Petal.Length&quot;: 1.3,
    &quot;Petal.Width&quot;: 0.2,
    &quot;Species&quot;: &quot;setosa&quot;
  }
] </code></pre>
<p>As a real example, the <a href="http://christophergandrud.github.io/networkD3/#simple">simpleNetwork</a> widget accepts a data frame containing network links on the R side, then transforms it to a d3 representation within the JavaScript <code>renderValue</code> function:</p>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript">renderValue<span class="op">:</span> <span class="kw">function</span>(el<span class="op">,</span> x<span class="op">,</span> instance) <span class="op">{</span>

  <span class="co">// convert links data frame to d3 friendly format</span>
  <span class="kw">var</span> links <span class="op">=</span> <span class="va">HTMLWidgets</span>.<span class="at">dataframeToD3</span>(<span class="va">x</span>.<span class="at">links</span>)<span class="op">;</span>
  
  <span class="co">// ... use the links, etc ...</span>

<span class="op">}</span></code></pre></div>
</div>
<div id="htmlwidgets.transposearray2d" class="section level3">
<h3>HTMLWidgets.transposeArray2D()</h3>
<p>Sometimes a 2-dimensional array requires a similar transposition. For this the <code>transposeArray2D()</code> function is provided. Here is an example array:</p>
<pre><code>[
  [5.1, 4.9, 4.7, 4.6, 5, 5.4, 4.6, 5],
  [3.5, 3, 3.2, 3.1, 3.6, 3.9, 3.4, 3.4],
  [1.4, 1.4, 1.3, 1.5, 1.4, 1.7, 1.4, 1.5],
  [0.2, 0.2, 0.2, 0.2, 0.2, 0.4, 0.3, 0.2],
  [&quot;setosa&quot;, &quot;setosa&quot;, &quot;setosa&quot;, &quot;setosa&quot;, &quot;setosa&quot;, &quot;setosa&quot;, &quot;setosa&quot;, &quot;setosa&quot;]
] </code></pre>
<p><code>HTMLWidgets.transposeArray2D()</code> can transpose it to:</p>
<pre><code>[
  [5.1, 3.5, 1.4, 0.2, &quot;setosa&quot;],
  [4.9, 3, 1.4, 0.2, &quot;setosa&quot;],
  [4.7, 3.2, 1.3, 0.2, &quot;setosa&quot;],
  [4.6, 3.1, 1.5, 0.2, &quot;setosa&quot;],
  [5, 3.6, 1.4, 0.2, &quot;setosa&quot;],
  [5.4, 3.9, 1.7, 0.4, &quot;setosa&quot;],
  [4.6, 3.4, 1.4, 0.3, &quot;setosa&quot;],
  [5, 3.4, 1.5, 0.2, &quot;setosa&quot;]
] </code></pre>
<p>As a real example, the <a href="http://rstudio.github.io/dygraphs">dygraphs</a> widget uses this function to transpose the “file” (data) argument it gets from the R side before passing it on to the dygraphs library:</p>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript">renderValue<span class="op">:</span> <span class="kw">function</span>(el<span class="op">,</span> x<span class="op">,</span> instance) <span class="op">{</span>
   
    <span class="co">// ... code excluded ...</span>
    
    <span class="co">// transpose array</span>
    <span class="va">attrs</span>.<span class="at">file</span> <span class="op">=</span> <span class="va">HTMLWidgets</span>.<span class="at">transposeArray2D</span>(<span class="va">attrs</span>.<span class="at">file</span>)<span class="op">;</span>
    
    <span class="co">// ... more code excluded ...</span>
<span class="op">}</span></code></pre></div>
</div>
<div id="custom-json-serializer" class="section level3">
<h3>Custom JSON serializer</h3>
<p>You may find it necessary to customize the JSON serialization of widget data when the default serializer in <strong>htmlwidgets</strong> does not work in the way you have expected. For widget package authors, there are two levels of customization for the JSON serialization: you can either customize the default values of arguments for <code>jsonlite::toJSON()</code>, or just customize the whole function.</p>
<ol style="list-style-type: decimal">
<li><p><code>jsonlite::toJSON()</code> has a lot of arguments, and we have already changed some of its default values. Below is the JSON serializer we use in <strong>htmlwidgets</strong> at the moment:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">function (x, ..., <span class="dt">dataframe =</span> <span class="st">&quot;columns&quot;</span>, <span class="dt">null =</span> <span class="st">&quot;null&quot;</span>, <span class="dt">na =</span> <span class="st">&quot;null&quot;</span>, 
    <span class="dt">auto_unbox =</span> <span class="ot">TRUE</span>, <span class="dt">digits =</span> <span class="kw">getOption</span>(<span class="st">&quot;shiny.json.digits&quot;</span>, 
        <span class="dv">16</span>), <span class="dt">use_signif =</span> <span class="ot">TRUE</span>, <span class="dt">force =</span> <span class="ot">TRUE</span>, <span class="dt">POSIXt =</span> <span class="st">&quot;ISO8601&quot;</span>, 
    <span class="dt">UTC =</span> <span class="ot">TRUE</span>, <span class="dt">rownames =</span> <span class="ot">FALSE</span>, <span class="dt">keep_vec_names =</span> <span class="ot">TRUE</span>) 
{
    jsonlite::<span class="kw">toJSON</span>(<span class="kw">I</span>(x), <span class="dt">dataframe =</span> dataframe, <span class="dt">null =</span> null, 
        <span class="dt">na =</span> na, <span class="dt">auto_unbox =</span> auto_unbox, <span class="dt">digits =</span> digits, <span class="dt">use_signif =</span> use_signif, 
        <span class="dt">force =</span> force, <span class="dt">POSIXt =</span> POSIXt, <span class="dt">UTC =</span> UTC, <span class="dt">rownames =</span> rownames, 
        <span class="dt">keep_vec_names =</span> keep_vec_names, <span class="dt">json_verbatim =</span> <span class="ot">TRUE</span>, 
        ...)
}</code></pre></div>
<p>For example, we convert data frames to JSON by columns instead of rows (the latter is <code>jsonlite::toJSON</code>’s default). If you want to change the default values of any arguments, you can attach an attribute <code>TOJSON_ARGS</code> to the widget data to be passed to <code>createWidget()</code>, e.g.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">fooWidget &lt;-<span class="st"> </span>function(data, name, ...) {
  <span class="co"># ... process the data ...</span>
  params &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">foo =</span> data, <span class="dt">bar =</span> <span class="ot">TRUE</span>)
  <span class="co"># customize toJSON() argument values</span>
  <span class="kw">attr</span>(params, <span class="st">&#39;TOJSON_ARGS&#39;</span>) &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">digits =</span> <span class="dv">7</span>, <span class="dt">na =</span> <span class="st">&#39;string&#39;</span>)
  htmlwidgets::<span class="kw">createWidget</span>(name, <span class="dt">x =</span> params, ...)
}</code></pre></div>
<p>We changed the default value of <code>digits</code> from 16 to 7, and <code>na</code> from <code>null</code> to <code>string</code> in the above example. It is up to you, the package author, whether you want to expose such customization to users. For example, you can leave an extra argument in your widget function so that users can customize the behavior of the JSON serializer:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">fooWidget &lt;-<span class="st"> </span>function(data, name, ..., <span class="dt">JSONArgs =</span> <span class="kw">list</span>(<span class="dt">digits =</span> <span class="dv">7</span>)) {
  <span class="co"># ... process the data ...</span>
  params &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">foo =</span> data, <span class="dt">bar =</span> <span class="ot">TRUE</span>)
  <span class="co"># customize toJSON() argument values</span>
  <span class="kw">attr</span>(params, <span class="st">&#39;TOJSON_ARGS&#39;</span>) &lt;-<span class="st"> </span>JSONArgs
  htmlwidgets::<span class="kw">createWidget</span>(name, <span class="dt">x =</span> params, ...)
}</code></pre></div>
<p>You can also use a global option <code>htmlwidgets.TOJSON_ARGS</code> to customize the JSON serializer arguments for all widgets in the current R session, e.g.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">options</span>(<span class="dt">htmlwidgets.TOJSON_ARGS =</span> <span class="kw">list</span>(<span class="dt">digits =</span> <span class="dv">7</span>, <span class="dt">pretty =</span> <span class="ot">TRUE</span>))</code></pre></div></li>
<li><p>If you do not want to use <strong>jsonlite</strong>, you can completely override the serializer function by attaching an attribute <code>TOJSON_FUNC</code> to the widget data, e.g.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">fooWidget &lt;-<span class="st"> </span>function(data, name, ...) {
  <span class="co"># ... process the data ...</span>
  params &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">foo =</span> data, <span class="dt">bar =</span> <span class="ot">TRUE</span>)
  <span class="co"># customize the JSON serializer</span>
  <span class="kw">attr</span>(params, <span class="st">&#39;TOJSON_FUNC&#39;</span>) &lt;-<span class="st"> </span>MY_OWN_JSON_FUNCTION
  htmlwidgets::<span class="kw">createWidget</span>(name, <span class="dt">x =</span> params, ...)
}</code></pre></div>
<p>Here <code>MY_OWN_JSON_FUNCTION</code> can be an arbitrary R function that converts R objects to JSON. If you have also specified the <code>TOJSON_ARGS</code> attribute, it will be passed to your custom JSON function as well.</p></li>
</ol>
<p>Note these features about custom JSON serializers require the <strong>shiny</strong> version to be greater than 0.11.1 if you render the widgets in Shiny apps.</p>
</div>
</div>
<div id="widget-instance-data" class="section level2">
<h2>Widget instance data</h2>
<p>You may have noticed that the JavaScript binding for a widget consists of a set of JavaScript functions rather than a class which has its own instance data. Many widgets do not require instance data, but if yours does (e.g. you need to save a JS library provided object, reference to a DOM element, or any other computed data) there is a mechanism available to do so.</p>
<p>Here is how it works: return an object from the <code>initialize</code> method and that object will subsequently be passed to the <code>renderValue</code> and <code>resize</code> methods. For example:</p>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="va">HTMLWidgets</span>.<span class="at">widget</span>(<span class="op">{</span>
  
  <span class="dt">name</span><span class="op">:</span> <span class="st">&quot;demo&quot;</span><span class="op">,</span>
  
  <span class="dt">type</span><span class="op">:</span> <span class="st">&quot;output&quot;</span><span class="op">,</span>
  
  <span class="dt">initialize</span><span class="op">:</span> <span class="kw">function</span>(el<span class="op">,</span> width<span class="op">,</span> height) <span class="op">{</span>
    <span class="co">// object we&#39;ll use for instance data</span>
    <span class="cf">return</span> <span class="op">{};</span>
  <span class="op">},</span>

  <span class="dt">renderValue</span><span class="op">:</span> <span class="kw">function</span>(el<span class="op">,</span> x<span class="op">,</span> instance) <span class="op">{</span>
    <span class="co">// access instance as necessary</span>
  <span class="op">},</span>

  <span class="dt">resize</span><span class="op">:</span> <span class="kw">function</span>(el<span class="op">,</span> width<span class="op">,</span> height<span class="op">,</span> instance) <span class="op">{</span> 
    <span class="co">// access instance as necessary</span>
  <span class="op">}</span>
<span class="op">}</span>)<span class="op">;</span></code></pre></div>
<p>A real-life example of using instance data is in the <a href="http://rstudio.github.io/dygraphs">dygraphs</a> widget, which uses the instance to store the actual Dygraph object for later manipulation. You can see <a href="https://github.com/rstudio/dygraphs/blob/master/inst/htmlwidgets/dygraphs.js">the code</a> for the dygraphs JavaScript binding that takes advantage of instance data.</p>
</div>
<div id="passing-javascript-functions" class="section level2">
<h2>Passing JavaScript functions</h2>
<p>As you would expect, character vectors passed from R to JavaScript are converted to JavaScript strings. However, what if you want to allow users to provide custom JavaScript functions for formatting, drawing, or event handling? For this case, the <strong>htmlwidgets</strong> package includes a <code>JS()</code> function that allows you to request that a character value is evaluated as JavaScript when it is received on the client.</p>
<p>For example, the <a href="http://rstudio.github.io/dygraphs">dygraphs</a> widget includes a <code>dyCallbacks</code> function that allows the user to provide callback functions for a variety of contexts. These callbacks are “marked” as containing JavaScript so that they can be converted to actual JavaScript functions on the client:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">callbacks &lt;-<span class="st"> </span><span class="kw">list</span>(
  <span class="dt">clickCallback =</span> <span class="kw">JS</span>(clickCallback)
  <span class="dt">drawCallback =</span> <span class="kw">JS</span>(drawCallback)
  <span class="dt">highlightCallback =</span> <span class="kw">JS</span>(highlightCallback)
  <span class="dt">pointClickCallback =</span> <span class="kw">JS</span>(pointClickCallback)
  <span class="dt">underlayCallback =</span> <span class="kw">JS</span>(underlayCallback)
)</code></pre></div>
<p>Another example is in the <a href="http://rstudio.github.io/DT">DT</a> (DataTables) widget, where users can specify an <code>initCallback</code> with JavaScript to execute after the table is loaded and initialized:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">datatable</span>(<span class="kw">head</span>(iris, <span class="dv">20</span>), <span class="dt">options =</span> <span class="kw">list</span>(
  <span class="dt">initComplete =</span> <span class="kw">JS</span>(
    <span class="st">&quot;function(settings, json) {&quot;</span>,
    <span class="st">&quot;$(this.api().table().header()).css({&#39;background-color&#39;: &#39;#000&#39;, &#39;color&#39;: &#39;#fff&#39;});&quot;</span>,
    <span class="st">&quot;}&quot;</span>)
))</code></pre></div>
<p>If multiple arguments are passed to <code>JS()</code> (as in the above example), they will be concatenated into a single string separated by <code>\n</code>.</p>
</div>
<div id="custom-widget-html" class="section level2">
<h2>Custom widget HTML</h2>
<p>Typically the HTML “housing” for a widget is just a <code>&lt;div&gt;</code> element, and this is correspondingly the default behavior for new widgets that don’t specify otherwise. However, sometimes you need a different element type. For example, the <a href="https://github.com/htmlwidgets/sparkline">sparkline</a> widget requires a <code>&lt;span&gt;</code> element so implements the following custom HTML generation function:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sparkline_html &lt;-<span class="st"> </span>function(id, style, class, ...){
  tags$<span class="kw">span</span>(<span class="dt">id =</span> id, <span class="dt">class =</span> class)
}</code></pre></div>
<p>Note that this function is looked up within the package implementing the widget by the convention <code>widgetname_html</code> so it need not be formally exported from your package or otherwise registered with <strong>htmlwidgets</strong>.</p>
<p>Most widgets won’t need a custom HTML function but if you need to generate custom HTML for your widget (e.g. you need an <code>&lt;input&gt;</code> or a <code>&lt;span&gt;</code> rather than a <code>&lt;div&gt;</code>) then you should use the <strong>htmltools</strong> package (as demonstrated by the code above).</p>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>N.B. It is not exported from <strong>htmlwidgets</strong>, so you are not supposed to call this function directly.<a href="#fnref1">↩</a></p></li>
</ol>
</div>


</div> <!-- page-body -->

<footer>
  <div>&nbsp;</div>
  <div>&nbsp;</div>
  <div class="text-muted">
  Copyright &copy; 2014 - 2015 Ramnath Vaidyanathan, Kenton Russell, and RStudio, Inc.
  </div>
</footer>

<script>
// manage active state of headres and navigation based on current page

$(document).ready(function () {
  
  // compute name of page
  href = window.location.pathname;
  href = href.substr(href.lastIndexOf('/') + 1);
  if (href == "")
    href = "index.html";
  
  // main navigation and headers
  if (href.startsWith("index")) {
    $('#nav-home').addClass('active');
    $('.title').addClass('hidden');
  } else if (href.startsWith("showcase")) {
    $('#nav-showcase').addClass('active');
    $("#page-body").detach().appendTo('#showcase-body');
    $('.showcase-header').removeClass('hidden');
    $('.title').addClass('hidden');
  } else if (href.startsWith("develop")) {
    $('#nav-develop').addClass('active');
  }
     
  // submenu navigation (used by showcase and develop)
  $('.list-group a[href="' + href + '"]').addClass('active');      
});

</script>

</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>


</body>
</html>
